{% load static %}
<section class="bg-gray-50 py-12 sm:py-20 lg:py-24">
    <div class="mx-auto max-w-screen-xl px-5 sm:px-6 lg:px-8">
        <!-- Content -->
        <div class="mx-auto flex max-w-xl flex-col items-center text-center">
            <img src={% static 'images/paper-airplane.png' %} class="h-auto w-24 animate-orbit" />
            <h2
                class="mt-6 text-3xl font-medium tracking-normal text-gray-900 sm:mt-8 sm:text-4xl md:tracking-tight lg:text-5xl lg:leading-tight">
                Get the most talked about stories directly in your inbox
            </h2>
            <p class="mt-4 text-lg leading-relaxed text-gray-500">
                Every week we share the most relevant news in tech, culture and
                entertainment. Join our community of over
                <span class="font-medium text-gray-800">10,000 readers</span>.
            </p>

            <!-- Newsletter signup container -->
            <div class="mt-8 flex w-full flex-col items-center sm:mt-10">
                <div class="relative h-14 w-full max-w-xl rounded-3xl">
                    <!-- Newsletter signup form -->
                    <form id="newsletter-form"
                        class="group rounded-3xl border border-gray-300/70 bg-transparent transition duration-300 ease-in-out">
                        {% csrf_token %}
                        <input type="email" name="email"
                            class="h-14 w-full rounded-3xl border-0 border-transparent bg-white py-3.5 pl-6 pr-36 text-sm leading-5 text-gray-800 transition duration-300 ease-in-out hover:bg-transparent focus:bg-white focus:outline-none focus:ring-2 focus:ring-red-100"
                            required placeholder="Enter your email" autocomplete="email" />

                        <button type="submit"
                            class="before:content-[&quot;&quot;] absolute right-3 top-1.5 inline-flex h-11 items-center bg-transparent px-4 py-2 text-tiny uppercase tracking-widest text-red-700 outline-none transition duration-300 ease-in-out before:absolute before:left-0 before:right-auto before:h-6 before:w-px before:bg-gray-300/70 before:transition before:duration-300 before:ease-in-out hover:text-red-600 focus:outline-none sm:font-medium md:px-6">
                            Subscribe
                        </button>
                    </form>
                </div>

                <!-- Success message -->
                <div id="newsletter-success" class="mt-4 hidden text-center text-sm text-green-600">
                </div>

                <!-- Error message -->
                <div id="newsletter-error" class="mt-4 hidden text-center text-sm text-red-600">
                </div>

                <p class="mt-4 text-center text-sm text-gray-500">
                    Your privacy is important to us. We promise not to send you spam!
                </p>
            </div>
        </div>
    </div>
</section>
{% block page_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('newsletter-form');
            const successMessage = document.getElementById('newsletter-success');
            const errorMessage = document.getElementById('newsletter-error');
        
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Hide any existing messages
                successMessage.classList.add('hidden');
                errorMessage.classList.add('hidden');
        
                const formData = new FormData(form);
        
                fetch('{% url "subscribe_newsletter" %}', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        successMessage.textContent = data.message;
                        successMessage.classList.remove('hidden');
                        form.reset();
                    } else {
                        errorMessage.textContent = data.message;
                        errorMessage.classList.remove('hidden');
                    }
                })
                .catch(error => {
                    errorMessage.textContent = 'An error occurred. Please try again later.';
                    errorMessage.classList.remove('hidden');
                });
            });
        });
    </script>
{% endblock %}